import RPi.GPIO as GPIO
import sys
import select
import time

GPIO.setmode(GPIO.BCM)
GPIO.setup(18, GPIO.OUT)
GPIO.setup(2, GPIO.OUT)

pwm = GPIO.PWM(18, 10)
array = (1175, 1319, 1046, 880, 880, 980, 784, 784, 587, 660, 523, 440, 440, 494, 392, 392\
         , 294, 330, 262, 220, 220, 247, 220, 208, 196, 196, 10, 10, 784, 784, 294, 311, \
         330, 523, 523, 330, 523, 523, 330, 523, 523, 523, 523, 523, 10, 1046, 1175, 1245,\
         1319, 1046, 1175, 1319, 1319, 988, 1175, 1175, 1046, 1046, 1046, 1046, 1046, 1046, 294, 311\
         , 330, 523, 523, 330, 523, 523, 330, 523, 523, 523, 523, 523, 10, 10, 880, 784, \
         740, 880, 1046, 1319, 1319, 1175, 1046, 880, 1175, 1175, 1175, 1175, 1175, 1175, 294, 311,\
         330, 523, 523, 330, 523, 523, 330, 523, 523, 523, 523, 523, 10, 1046, 1175, 1245,\
         1319, 1046, 1175, 1319, 1319, 988, 1175, 1175, 1046, 1046, 1046, 1046, 1046, 10, 1046, 1175,\
         1319, 1046, 1175, 1319, 1319, 1046, 1175, 1046, 1319, 1046, 1175, 1319, 1319, 1046, 1175, 1046,\
         1319, 1046, 1175, 1319, 1319, 988, 1175, 1175, 1046, 1046, 1046, 1046, 1046, 1046, 294, 311, \
         330, 523, 523, 330, 523, 523, 330, 523, 523, 523, 523, 523, 10, 1046, 1175, 1245,\
         1319, 1046, 1175, 1319, 1319, 988, 1175, 1175, 1046, 1046, 1046, 1046, 1046, 1046, 294, 311\
         , 330, 523, 523, 330, 523, 523, 330, 523, 523, 523, 523, 523, 10, 10, 880, 784, \
         740, 880, 1046, 1319, 1319, 1175, 1046, 880, 1175, 1175, 1175, 1175, 1175, 1175, 294, 311,\
         330, 523, 523, 330, 523, 523, 330, 523, 523, 523, 523, 523, 10, 1046, 1175, 1245,\
         1319, 1046, 1175, 1319, 1319, 988, 1175, 1175, 1046, 1046, 1046, 1046, 1046, 10, 1046, 1175,\
         1319, 1046, 1175, 1319, 1319, 1046, 1175, 1046, 1319, 1046, 1175, 1319, 1319, 1046, 1175, 1046,\
         1319, 1046, 1175, 1319, 1319, 988, 1175, 1175, 1046, 1046, 1046, 1046, 1046, 1046)
def checkStdin():
    while sys.stdin in select.select([sys.stdin], [], [], 0)[0]:
        data = sys.stdin.readline()
        if data:
            if data == "exit\n":
                GPIO.cleanup()
                exit()
            if data == "p\n":
                GPIO.output(2,GPIO.LOW)
                pwm.start(1)
            if data == "s\n":
                pwm.stop()
            if data[0] == 'f':
                pwm.start(1)
                frequency = int(data[1:])
                GPIO.output(2, GPIO.LOW)
                pwm.ChangeFrequency(frequency)
            if data[0] == 'b':
                pwm.start(1)
                frequency = int(data[1:])
                GPIO.output(2, GPIO.HIGH)
                pwm.ChangeFrequency(frequency)
            if data == "play\n":
                pwm.start(1)
                for i in array:
                    pwm.ChangeFrequency(i)
                    time.sleep(0.2)
                pwm.stop()


if __name__=="__main__":
    while True:
        checkStdin()